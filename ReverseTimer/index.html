<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ã€ç„¡æ–™ã€‘çµ¶å¯¾é…åˆ»ã—ãªã„ï¼æº–å‚™ãƒ»èµ·åºŠã‚¿ã‚¤ãƒ é€†ç®—ãƒ¡ãƒ¼ã‚«ãƒ¼</title>
    <meta name="description" content="å‡ºç™ºæ™‚é–“ã‹ã‚‰é€†ç®—ã—ã¦ã€Œä½•æ™‚ã«èµ·ãã‚Œã°ã„ã„ã‹ã€ã€Œä½•æ™‚ã‹ã‚‰æº–å‚™ã‚’å§‹ã‚ã‚Œã°ã„ã„ã‹ã€ã‚’åˆ†å˜ä½ã§è‡ªå‹•è¨ˆç®—ã™ã‚‹ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãŠå‡ºã‹ã‘ã€ãƒ‡ãƒ¼ãƒˆã€ãƒ©ã‚¤ãƒ–é å¾ã®æº–å‚™ã®ãŠä¾›ã«ã€‚">
    
    <meta property="og:title" content="ã€ç„¡æ–™ã€‘çµ¶å¯¾é…åˆ»ã—ãªã„ï¼æº–å‚™ãƒ»èµ·åºŠã‚¿ã‚¤ãƒ é€†ç®—ãƒ¡ãƒ¼ã‚«ãƒ¼">
    <meta property="og:description" content="é›»è»Šã®æ™‚é–“ã‹ã‚‰ã€Œã‚·ãƒ£ãƒ¯ãƒ¼ã€ã€Œãƒ¡ã‚¤ã‚¯ã€ã®æ™‚é–“ã‚’å¼•ã„ã¦ã€ãƒ‡ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã‚’åˆ†å˜ä½ã§ç®—å‡ºï¼">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pomesaku.github.io/UseAgents-Tools/ReverseTimer/">
    <meta name="twitter:card" content="summary">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff7043">
    <link rel="apple-touch-icon" href="icon-192.png">

    <style>
        body { font-family: "Hiragino Maru Gothic ProN", "Meiryo", sans-serif; background: #fff3e0; color: #333; max-width: 600px; margin: 0 auto; padding: 15px; }
        h1 { font-size: 1.4rem; text-align: center; color: #d84315; margin-bottom: 5px;}
        p.subtitle { text-align: center; font-size: 0.85rem; color: #795548; margin-bottom: 20px; }
        
        .card { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 20px; border-top: 4px solid #ff7043;}
        
        label { font-weight: bold; font-size: 0.95rem; color: #d84315; display: block; margin-bottom: 8px;}
        input[type="time"], input[type="text"], input[type="number"] { width: 100%; padding: 12px; margin-bottom: 10px; border: 2px solid #ffccbc; border-radius: 8px; font-size: 16px; box-sizing: border-box; background: #fbfbfb; color: #d84315; font-weight: bold;}
        input:focus { border-color: #ff7043; outline: none; }
        
        .task-row { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; background: #fff9c4; padding: 10px; border-radius: 8px; border: 1px dashed #fbc02d;}
        .task-row input[type="text"] { flex: 2; margin-bottom: 0; border: 1px solid #ccc; background: #fff; color: #333; font-weight: normal;}
        .task-row input[type="number"] { flex: 1; margin-bottom: 0; border: 1px solid #ccc; background: #fff; color: #333; font-weight: bold;}
        .delete-btn { background: #e53935; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold; height: 100%;}
        
        .add-btn { background: #fff; color: #ff7043; border: 2px dashed #ff7043; padding: 12px; width: 100%; border-radius: 8px; font-size: 1rem; font-weight: bold; cursor: pointer; margin-bottom: 20px;}
        .calc-btn { background: #ff7043; color: white; border: none; padding: 16px; width: 100%; border-radius: 8px; font-size: 1.2rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 0 #d84315; transition: 0.2s;}
        .calc-btn:active { transform: translateY(4px); box-shadow: none; }
        
        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .result-box { display: none; background: #ffebee; padding: 20px; border-radius: 12px; border: 3px solid #ef5350; margin-top: 25px; text-align: center; animation: fadeIn 0.5s;}
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        .result-box h2 { font-size: 1.1rem; color: #c62828; margin-top: 0; margin-bottom: 5px;}
        .deadline-time { font-size: 2.8rem; font-weight: bold; color: #b71c1c; margin: 10px 0; line-height: 1;}
        .total-min { font-size: 0.9rem; color: #666; margin-bottom: 20px;}

        /* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ */
        .timeline { text-align: left; background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #ffcdd2;}
        .timeline-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #ef9a9a; font-size: 0.95rem; color: #333;}
        .timeline-item:last-child { border-bottom: none; font-weight: bold; color: #d84315; }
        .timeline-time { font-weight: bold; color: #c62828; width: 60px;}

        /* åºƒå‘Šç”¨CSS */
        .ad-box { margin-top: 30px; padding: 15px; background: #fff; border: 1px solid #eee; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.02);}
        .ad-copy { font-size: 0.9rem; color: #00838f; font-weight: bold; margin-top: 0; margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>â° èµ·åºŠãƒ»æº–å‚™ã‚¿ã‚¤ãƒ é€†ç®—ãƒ¡ãƒ¼ã‚«ãƒ¼</h1>
    <p class="subtitle">é›»è»Šã®æ™‚é–“ã‹ã‚‰ã€è¡Œå‹•é–‹å§‹ã®ãƒ‡ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã‚’ç®—å‡º</p>

    <div class="card">
        <label>ğŸšƒ ä¹—ã‚‹é›»è»Šã®æ™‚é–“ï¼ˆç›®æ¨™ã®å‡ºç™ºæ™‚é–“ï¼‰</label>
        <input type="time" id="target-time" value="09:00" required>
    </div>

    <div class="card">
        <label>ğŸ’„ æº–å‚™ã«ã‹ã‹ã‚‹ã‚¿ã‚¹ã‚¯ã¨æ™‚é–“ï¼ˆåˆ†ï¼‰</label>
        <p style="font-size:0.8rem; color:#666; margin-top:0;">â€»ä¸‹ã‹ã‚‰ä¸Šã®é †ç•ªã§é€†ç®—ã•ã‚Œã¾ã™</p>
        
        <div id="task-container">
            <div class="task-row">
                <input type="text" value="ã‚·ãƒ£ãƒ¯ãƒ¼ãƒ»ç€æ›¿ãˆ" placeholder="ã‚¿ã‚¹ã‚¯å">
                <input type="number" value="20" min="0">åˆ†
                <button class="delete-btn" onclick="this.parentElement.remove()">Ã—</button>
            </div>
            <div class="task-row">
                <input type="text" value="ãƒ¡ã‚¤ã‚¯ãƒ»é«ªã®ã‚»ãƒƒãƒˆ" placeholder="ã‚¿ã‚¹ã‚¯å">
                <input type="number" value="30" min="0">åˆ†
                <button class="delete-btn" onclick="this.parentElement.remove()">Ã—</button>
            </div>
            <div class="task-row">
                <input type="text" value="æœé£Ÿãƒ»ã‚³ãƒ¼ãƒ’ãƒ¼" placeholder="ã‚¿ã‚¹ã‚¯å">
                <input type="number" value="15" min="0">åˆ†
                <button class="delete-btn" onclick="this.parentElement.remove()">Ã—</button>
            </div>
            <div class="task-row" style="background: #e3f2fd; border-color: #90caf9;">
                <input type="text" value="é§…ã¾ã§ã®ç§»å‹•æ™‚é–“" placeholder="ã‚¿ã‚¹ã‚¯å">
                <input type="number" value="15" min="0">åˆ†
                <button class="delete-btn" onclick="this.parentElement.remove()">Ã—</button>
            </div>
        </div>

        <button class="add-btn" onclick="addTask()">ï¼‹ ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã™ã‚‹</button>
        <button class="calc-btn" onclick="calculateTime()">ãƒ‡ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³ã‚’è¨ˆç®—</button>

        <div class="result-box" id="result-box">
            <h2>ğŸš¨ ã‚ãªãŸãŒèµ·ãã‚‹ï¼ˆæº–å‚™ã‚’å§‹ã‚ã‚‹ï¼‰æ™‚é–“</h2>
            <div class="deadline-time" id="start-time-display">00:00</div>
            <div class="total-min" id="total-min-display">åˆè¨ˆæº–å‚™æ™‚é–“: 0åˆ†</div>
            
            <div class="timeline" id="timeline-box">
                </div>
        </div>
    </div>

    <div class="ad-box">
        <p class="ad-copy">ğŸ’‡â€â™€ï¸ ãŠå‡ºã‹ã‘å‰ã®ç¾å®¹å®¤ãƒ»ã‚µãƒ­ãƒ³äºˆç´„ã¯ãŠæ¸ˆã¿ã§ã™ã‹ï¼Ÿ</p>
        <div style="margin-top: 10px;">
            <a href="#" style="display:block; background:#ec407a; color:#fff; padding:15px; text-decoration:none; border-radius:8px; font-weight:bold; font-size: 1.1rem; box-shadow: 0 4px 0 #c2185b;">âœ¨ æ¥½å¤©ãƒ“ãƒ¥ãƒ¼ãƒ†ã‚£ã§ã‚µãƒ­ãƒ³ã‚’æ¢ã™</a>
        </div>
    </div>

    <script>
        // ã‚¿ã‚¹ã‚¯è¿½åŠ æ©Ÿèƒ½
        function addTask() {
            const container = document.getElementById('task-container');
            const row = document.createElement('div');
            row.className = 'task-row';
            row.innerHTML = `
                <input type="text" placeholder="ä¾‹: å¿˜ã‚Œç‰©ãƒã‚§ãƒƒã‚¯">
                <input type="number" value="5" min="0">åˆ†
                <button class="delete-btn" onclick="this.parentElement.remove()">Ã—</button>
            `;
            container.appendChild(row);
        }

        // é€†ç®—ãƒ­ã‚¸ãƒƒã‚¯
        function calculateTime() {
            const targetTimeStr = document.getElementById('target-time').value;
            if (!targetTimeStr) {
                alert("ç›®æ¨™ã®å‡ºç™ºæ™‚é–“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
                return;
            }

            const rows = document.querySelectorAll('.task-row');
            if (rows.length === 0) {
                alert("ã‚¿ã‚¹ã‚¯ã‚’1ã¤ä»¥ä¸Šè¿½åŠ ã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            // ç›®æ¨™æ™‚é–“ã‚’Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ï¼ˆæ—¥ä»˜ã¯é©å½“ãªä»Šæ—¥ã«è¨­å®šï¼‰
            const [hours, minutes] = targetTimeStr.split(':');
            let currentTime = new Date();
            currentTime.setHours(parseInt(hours, 10), parseInt(minutes, 10), 0, 0);

            let totalMinutes = 0;
            let timelineHTML = '';
            
            // ã‚¿ã‚¹ã‚¯ã‚’é€†é †ã«å‡¦ç†ï¼ˆæœ€å¾Œã‹ã‚‰æœ€åˆã¸å¼•ãç®—ã—ã¦ã„ããŸã‚ã€é…åˆ—ã‚’é€†ã•ã¾ã«ã—ã¦è¨ˆç®—ï¼‰
            // UIã§ã¯ä¸ŠãŒå…ˆã€ä¸‹ãŒå¾Œãªã®ã§ã€è¡¨ç¤ºç”¨ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³é…åˆ—ã‚’ä½œã‚‹
            let timelineItems = [];

            // ã‚´ãƒ¼ãƒ«åœ°ç‚¹ï¼ˆå‡ºç™ºï¼‰ã‚’ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®æœ€å¾Œã«è¿½åŠ 
            timelineItems.unshift({
                timeStr: formatTime(currentTime),
                taskName: "ğŸ  å®¶ã‚’å‡ºç™ºï¼ï¼ˆç›®æ¨™æ™‚é–“ï¼‰"
            });

            // ã‚¿ã‚¹ã‚¯ã‚’ä¸‹ã‹ã‚‰é †ã«ï¼ˆé§…ã¾ã§ã®ç§»å‹• â†’ æœé£Ÿ â†’ ãƒ¡ã‚¤ã‚¯...ï¼‰é€†ç®—ã—ã¦ã„ã
            for (let i = rows.length - 1; i >= 0; i--) {
                const inputs = rows[i].querySelectorAll('input');
                const taskName = inputs[0].value || `ã‚¿ã‚¹ã‚¯ ${i + 1}`;
                const taskMin = parseInt(inputs[1].value) || 0;

                totalMinutes += taskMin;
                
                // æ™‚é–“ã‚’å¼•ãç®—
                currentTime.setMinutes(currentTime.getMinutes() - taskMin);

                // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ã€Œå‰ã€ã«è¿½åŠ ã—ã¦ã„ã
                timelineItems.unshift({
                    timeStr: formatTime(currentTime),
                    taskName: `é–‹å§‹ï¼š${taskName} (${taskMin}åˆ†)`
                });
            }

            // ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®HTMLã‚’ç”Ÿæˆ
            timelineItems.forEach(item => {
                timelineHTML += `
                    <div class="timeline-item">
                        <span class="timeline-time">${item.timeStr}</span>
                        <span>${item.taskName}</span>
                    </div>
                `;
            });

            // çµæœã‚’ç”»é¢ã«è¡¨ç¤º
            document.getElementById('start-time-display').innerText = formatTime(currentTime);
            document.getElementById('total-min-display').innerText = `åˆè¨ˆæº–å‚™æ™‚é–“: ${totalMinutes}åˆ†`;
            document.getElementById('timeline-box').innerHTML = timelineHTML;
            document.getElementById('result-box').style.display = 'block';

            // çµæœã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('result-box').scrollIntoView({ behavior: 'smooth' });
        }

        // æ™‚é–“ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç”¨é–¢æ•° (HH:MM)
        function formatTime(date) {
            return String(date.getHours()).padStart(2, '0') + ':' + String(date.getMinutes()).padStart(2, '0');
        }
    </script>
</body>
</html>