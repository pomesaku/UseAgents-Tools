<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ã€ç„¡æ–™ã€‘è³‡é‡‘é…åˆ†è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï½œç«¶é¦¬ã®3é€£å˜å¤šç‚¹è²·ã„ãƒ»ã‚³ãƒ”ãƒšã§ä¸€ç™ºæœ€é©åŒ–</title>
    <meta name="description" content="netkeibaã‚„JRAã®ã‚ªãƒƒã‚ºè¡¨ã‚’ãã®ã¾ã¾ã‚³ãƒ”ãƒšã™ã‚‹ã ã‘ï¼3é€£å˜ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©è²·ã„ç›®ãŒå¤šã„æ™‚ã®è³‡é‡‘é…åˆ†ã‚’ã€ã©ã®ç›®ãŒæ¥ã¦ã‚‚åˆ©ç›ŠãŒåŒã˜ã«ãªã‚‹ã‚ˆã†ä¸€ç¬ã§è‡ªå‹•è¨ˆç®—ã™ã‚‹å®Œå…¨ç„¡æ–™ã®Webã‚¢ãƒ—ãƒªã§ã™ã€‚">
    
    <meta property="og:title" content="ã€ç„¡æ–™ã€‘ç§’é€Ÿãƒ»è³‡é‡‘é…åˆ†è¨ˆç®—ãƒ„ãƒ¼ãƒ«">
    <meta property="og:description" content="ã‚ªãƒƒã‚ºã‚’ã‚³ãƒ”ãƒšã™ã‚‹ã ã‘ã§ä¸€ç™ºè¨ˆç®—ï¼ç™ºèµ°3åˆ†å‰ã®ãƒ‘ãƒ‹ãƒƒã‚¯ã‚’æ•‘ã†ç¥ãƒ„ãƒ¼ãƒ«">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pomesaku.github.io/BetBalance/">
    <meta name="twitter:card" content="summary">

    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f4f7f6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
        h1 { font-size: 1.3rem; text-align: center; color: #d32f2f; margin-bottom: 5px;}
        p.subtitle { text-align: center; font-size: 0.85rem; color: #666; margin-bottom: 10px; }
        .bookmark-notice { text-align: center; font-size: 0.85rem; font-weight: bold; color: #0056b3; background: #e8f4fd; padding: 8px; border-radius: 4px; margin-bottom: 20px;}
        
        .card { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px;}
        label { font-weight: bold; font-size: 0.95rem; color: #444; display: block; margin-bottom: 5px;}
        input[type="number"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #ddd; border-radius: 6px; font-size: 18px; box-sizing: border-box; background: #fafafa; font-weight: bold;}
        textarea { width: 100%; height: 160px; padding: 12px; margin-bottom: 15px; border: 2px solid #ddd; border-radius: 6px; font-size: 15px; box-sizing: border-box; background: #fafafa; resize: vertical; line-height: 1.5; color: #333;}
        textarea::placeholder { color: #999; }
        textarea:focus, input[type="number"]:focus { border-color: #d32f2f; outline: none; }
        button.calc-btn { background: #d32f2f; color: white; border: none; padding: 16px; width: 100%; border-radius: 6px; font-size: 18px; font-weight: bold; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 0 #b71c1c;}
        button.calc-btn:active { transform: translateY(4px); box-shadow: none; }
        .notice { font-size: 0.8rem; color: #d32f2f; margin-bottom: 15px; font-weight: bold;}
        table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.95rem;}
        th, td { padding: 10px 5px; text-align: right; border-bottom: 1px solid #ddd; }
        th { background: #f8f8f8; color: #555; font-weight: normal; font-size: 0.85rem;}
        td.bet-name { text-align: left; font-weight: bold; color: #555; font-size: 0.9rem;}
        td.buy-amount { color: #d32f2f; font-weight: bold; font-size: 1.1rem;}
        .summary { display: flex; justify-content: space-between; background: #fff3f3; padding: 15px; border-radius: 6px; border: 1px solid #ffcdd2; margin-bottom: 15px;}
        .summary div { text-align: center; }
        .summary span { display: block; font-size: 1.3rem; font-weight: bold; color: #d32f2f; margin-top: 5px;}
        
        /* åºƒå‘Šç”¨CSS */
        .ad-box { margin-top: 25px; padding: 15px; background: #fdfbf2; border: 2px dashed #e6c86e; border-radius: 8px; text-align: center; }
        .ad-copy { font-size: 0.9rem; color: #947100; font-weight: bold; margin-top: 0; margin-bottom: 10px; }
        .dmm-btn a { display: block; background: #ff9800; color: white; padding: 14px; border-radius: 6px; text-decoration: none; font-weight: bold; font-size: 1.1rem; box-shadow: 0 4px 0 #e65100; transition: 0.2s; }
        .dmm-btn a:active { transform: translateY(4px); box-shadow: none; }
        .abema-banner { overflow: hidden; }
        .abema-banner a { display: block; width: 100%; height: auto; }
        .abema-banner img { max-width: 100%; height: auto !important; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: block; margin: 0 auto; }
        
        /* SEOãƒ†ã‚­ã‚¹ãƒˆç”¨CSS */
        .seo-text { max-width: 600px; margin: 40px auto; padding: 20px; color: #666; font-size: 0.85rem; border-top: 1px solid #ddd; line-height: 1.6;}
        .seo-text h2 { font-size: 1rem; color: #444; margin-bottom: 10px;}
    </style>
</head>
<body>
    <h1>ğŸ”¥ ç§’é€Ÿãƒ»è³‡é‡‘é…åˆ†ãƒ„ãƒ¼ãƒ«</h1>
    <p class="subtitle">ã‚ªãƒƒã‚ºã‚’ã‚³ãƒ”ãƒšã™ã‚‹ã ã‘ã§ä¸€ç¬ã§æœ€é©åŒ–</p>
    
    <div class="bookmark-notice">
        â­ æ¯é€±æœ«ã™ãä½¿ãˆã‚‹ã‚ˆã†ã«ã€ã“ã®ãƒšãƒ¼ã‚¸ã‚’ã€Œãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã€ã—ã¦ãŠã„ã¦ãã ã•ã„ï¼
    </div>
    
    <div class="card">
        <label>ç·äºˆç®— (å††):</label>
        <input type="number" id="budget" value="10000" step="100">
        
        <label>ã‚ªãƒƒã‚ºè¡¨ã‚’ãã®ã¾ã¾ãƒšãƒ¼ã‚¹ãƒˆ:</label>
        <p style="font-size:0.8rem; color:#666; margin-top:0;">â€»è²·ã„ç›®ã¨ã‚ªãƒƒã‚ºã‚’è‡ªå‹•ã§åˆ¤åˆ¥ã—ã¾ã™ã€‚</p>
        <textarea id="bulk-odds" placeholder="ã€å…¥åŠ›ä¾‹ã€‘&#10;1-2-3 150.5å€&#10;2-4-1 49&#10;å˜å‹ 7 4.5å€"></textarea>
        
        <p class="notice" id="save-notice">âœ”ï¸ å…¥åŠ›å†…å®¹ã¯è‡ªå‹•ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™</p>
        <button class="calc-btn" onclick="calculate()">ä¸€ç™ºè¨ˆç®— (æŠ½å‡ºï¼†é…åˆ†)</button>

        <div class="ad-box">
            <p class="ad-copy">ğŸ‘‡ æ¬¡ã®ãƒ¬ãƒ¼ã‚¹ã¾ã§ã®æš‡ã¤ã¶ã—ã«</p>
            <div class="dmm-btn">
                <a href="https://px.a8.net/svt/ejp?a8mat=4AXFOH+C8KSFM+2GMK+ZQ80I" rel="nofollow">1å†Š115å††ã®DMMã‚³ãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¿ãƒ«ï¼</a>
                <img border="0" width="1" height="1" src="https://www12.a8.net/0.gif?a8mat=4AXFOH+C8KSFM+2GMK+ZQ80I" alt="">
            </div>
        </div>
    </div>

    <div class="card" id="result-card" style="display:none;">
        <div class="summary">
            <div>å®Ÿéš›ã®è³¼å…¥é¡<br><span id="actual-total">0</span></div>
            <div>å¹³å‡æ‰•æˆ»è¦‹è¾¼<br><span id="avg-return">0</span></div>
        </div>
        <table id="result-table">
            </table>

        <div class="ad-box abema-banner" style="margin-top: 20px; border-color: #bee5eb; background: #f2f9fa;">
            <p class="ad-copy" style="color: #0c5460;">ğŸ“º ä»Šã™ããƒ¬ãƒ¼ã‚¹ä¸­ç¶™ãƒ»ã‚®ãƒ£ãƒ³ãƒ–ãƒ«ç•ªçµ„ã‚’è¦‹ã‚‹ãªã‚‰</p>
            <a href="https://px.a8.net/svt/ejp?a8mat=4AXFOH+C7DX82+4EKC+62MDD" rel="nofollow">
            <img border="0" width="600" height="94" alt="" src="https://www21.a8.net/svt/bgt?aid=260220833738&wid=001&eno=01&mid=s00000020550001020000&mc=1"></a>
            <img border="0" width="1" height="1" src="https://www12.a8.net/0.gif?a8mat=4AXFOH+C7DX82+4EKC+62MDD" alt="">
        </div>
    </div>

    <div class="seo-text">
        <h2>ğŸ’¡ ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ï¼ˆ3é€£å˜ãƒ»ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰</h2>
        <p>å½“ã‚µã‚¤ãƒˆã¯ã€ç«¶é¦¬ã«ãŠã‘ã‚‹ã€Œå¤šç‚¹è²·ã„ã€ã®è³‡é‡‘é…åˆ†ã‚’æ¥µé™ã¾ã§åŠ¹ç‡åŒ–ã™ã‚‹ç„¡æ–™ã®è³‡é‡‘è¨ˆç®—æ©Ÿï¼ˆãƒˆãƒªã‚¬ãƒŸé˜²æ­¢ãƒ„ãƒ¼ãƒ«ï¼‰ã§ã™ã€‚</p>
        <p>ç‰¹ã«3é€£å˜ã®ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„é¦¬é€£ã®å¤šç‚¹è²·ã„ãªã©ã€è²·ã„ç›®ãŒ30ç‚¹ã€œ60ç‚¹ã‚’è¶…ãˆã‚‹å ´åˆã€ç™ºèµ°ç›´å‰ã«ã‚ªãƒƒã‚ºã‚’è¦‹ãªãŒã‚‰æ‰‹å‹•ã§äºˆç®—ã‚’å‰²ã‚ŠæŒ¯ã‚‹ã®ã¯ä¸å¯èƒ½ã§ã™ã€‚æœ¬ãƒ„ãƒ¼ãƒ«ãªã‚‰ã€netkeibaã‚„JRAã®å‡ºé¦¬è¡¨ãƒ»ã‚ªãƒƒã‚ºç”»é¢ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã‚‹ï¼ˆã‚³ãƒ”ãƒšã™ã‚‹ï¼‰ã ã‘ã§ã€ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå‹•ã§ã‚ªãƒƒã‚ºã‚’æŠ½å‡ºã—ã€æŒ‡å®šã—ãŸäºˆç®—å†…ã§ã€Œã©ã®è²·ã„ç›®ãŒçš„ä¸­ã—ã¦ã‚‚ã€ã»ã¼åŒã˜åˆ©ç›Šï¼ˆæ‰•æˆ»é‡‘ï¼‰ã«ãªã‚‹ã€ã‚ˆã†ã«100å††å˜ä½ã§æœ€é©ãªè³¼å…¥é¡ã‚’ç¬æ™‚ã«å‰²ã‚Šå‡ºã—ã¾ã™ã€‚</p>
        <p>é¢å€’ãªã‚¨ã‚¯ã‚»ãƒ«ï¼ˆExcelï¼‰ã§ã®ç®¡ç†ã‚„ã€è¤‡é›‘ãªè¨ˆç®—å¼ã¯ä¸€åˆ‡ä¸è¦ã§ã™ã€‚ã‚¹ãƒãƒ›ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚µã‚¯ã‚µã‚¯å‹•ããŸã‚ã€ç«¶é¦¬å ´ã‚„WINSã§ã®ç›´å‰äºˆæƒ³ã«æœ€é©ã§ã™ã€‚</p>
    </div>

    <script>
        const budgetInput = document.getElementById('budget');
        const bulkOddsInput = document.getElementById('bulk-odds');

        window.onload = () => {
            if(localStorage.getItem('savedBudget')) budgetInput.value = localStorage.getItem('savedBudget');
            if(localStorage.getItem('savedOdds')) bulkOddsInput.value = localStorage.getItem('savedOdds');
        };

        budgetInput.addEventListener('input', () => localStorage.setItem('savedBudget', budgetInput.value));
        bulkOddsInput.addEventListener('input', () => localStorage.setItem('savedOdds', bulkOddsInput.value));

        function calculate() {
            const budget = parseFloat(budgetInput.value);
            const rawText = bulkOddsInput.value;

            if (!rawText || !budget) {
                alert("äºˆç®—ã¨ã‚ªãƒƒã‚ºã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            let betsList = [];
            const lines = rawText.split('\n');
            
            lines.forEach(line => {
                if (!line.trim()) return;

                let cleanLine = line.replace(/\d+(-\d+)+/g, ' ');
                cleanLine = cleanLine.replace(/[\(\[\<]\d+[\)\]\>]/g, ' ');
                const matches = cleanLine.match(/\d+(?:\.\d+)?/g);
                
                if (matches) {
                    const oddsStr = matches[matches.length - 1];
                    const extractedOdds = parseFloat(oddsStr);
                    
                    if(extractedOdds > 0) {
                        let lastIndex = line.lastIndexOf(oddsStr);
                        let betName = line;
                        if (lastIndex !== -1) {
                            betName = line.substring(0, lastIndex) + line.substring(lastIndex + oddsStr.length);
                        }
                        betName = betName.replace(/å€/g, '').replace(/å††/g, '').trim();
                        if (!betName) betName = "æŒ‡å®šãªã—";

                        betsList.push({ name: betName, odds: extractedOdds });
                    }
                }
            });

            if (betsList.length === 0) {
                alert("ã‚ªãƒƒã‚ºãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚");
                return;
            }

            betsList.sort((a, b) => b.odds - a.odds);
            
            let sumInverse = 0;
            betsList.forEach(bet => { sumInverse += (1 / bet.odds); });

            const targetReturn = budget / sumInverse;
            let tableHTML = '<tr><th style="text-align:left;">è²·ã„ç›®</th><th>ã‚ªãƒƒã‚º</th><th>è³¼å…¥é¡(å††)</th><th>æ‰•æˆ»è¦‹è¾¼</th></tr>';
            let actualTotal = 0;
            let totalReturn = 0;

            betsList.forEach(bet => {
                let rawStake = targetReturn / bet.odds;
                let stake = Math.round(rawStake / 100) * 100;
                if(stake === 0) stake = 100; 
                
                actualTotal += stake;
                let expectedReturn = Math.floor(stake * bet.odds);
                totalReturn += expectedReturn;
                
                tableHTML += `<tr>
                    <td class="bet-name">${bet.name}</td>
                    <td>${bet.odds}</td>
                    <td class="buy-amount">${stake.toLocaleString()}</td>
                    <td>${expectedReturn.toLocaleString()}</td>
                </tr>`;
            });

            document.getElementById('actual-total').innerText = actualTotal.toLocaleString() + "å††";
            document.getElementById('avg-return').innerText = Math.floor(totalReturn / betsList.length).toLocaleString() + "å††";
            document.getElementById('result-table').innerHTML = tableHTML;
            document.getElementById('result-card').style.display = 'block';
            document.getElementById('result-card').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
