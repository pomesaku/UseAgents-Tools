<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ã€ç„¡æ–™ã€‘ç¥ãƒ»å‰²ã‚Šå‹˜ãƒ„ãƒ¼ãƒ«ï½œä¸Šå¸å¤šã‚ãƒ»é…åˆ»ãƒ»åˆã‚³ãƒ³ã®ä¸å¹³ç­‰ãªæ”¯æ‰•ã„ã‚’ä¸€ç™ºè¨ˆç®—</title>
    <meta name="description" content="é£²ã¿ä¼šã‚„åˆã‚³ãƒ³ã€ãƒ‰ãƒ©ã‚¤ãƒ–ã§ã®ã€Œã¡ã‚‡ã£ã¨è¤‡é›‘ãªå‰²ã‚Šå‹˜ã€ã‚’ã‚¹ãƒãƒ›ã§ä¸€ç™ºè¨ˆç®—ã€‚å¤šã‚ã«æ‰•ã†äººã€å°‘ãªã‚ã§ã„ã„äººã‚’æ¯”ç‡ã§åˆ†ã‘ã€100å††ãƒ»500å††ãƒ»1000å††å˜ä½ã§ã‚­ãƒªè‰¯ãä¸¸ã‚ã¦é›†é‡‘é¡ã‚’ç®—å‡ºã—ã¾ã™ã€‚å¹¹äº‹ã•ã‚“å¿…æºã®ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã€‚">
    
    <meta property="og:title" content="ã€ç„¡æ–™ã€‘ç¥ãƒ»å‰²ã‚Šå‹˜ãƒ„ãƒ¼ãƒ«ï½œè¤‡é›‘ãªæ”¯æ‰•ã„ã‚’ä¸€ç™ºè¨ˆç®—">
    <meta property="og:description" content="ä¸Šå¸å¤šã‚ã€é…åˆ»çµ„ã¯å°‘ãªã‚ã€é‹è»¢æ‰‹ã¯ç„¡æ–™â€¦é¢å€’ãªè¨ˆç®—ã‚’100å††å˜ä½ã§ã‚­ãƒªè‰¯ãä¸€ç™ºç®—å‡ºï¼">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ã‚ãªãŸã®GitHubã®URL/SplitBillTool/">
    <meta name="twitter:card" content="summary">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1565c0">
    <link rel="apple-touch-icon" href="icon-192.png">
    <script>
        if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('sw.js').catch(()=>{}); }); }
    </script>

    <style>
        body { font-family: "Hiragino Maru Gothic ProN", "Meiryo", sans-serif; background: #f0f4f8; color: #333; max-width: 600px; margin: 0 auto; padding: 15px; }
        h1 { font-size: 1.4rem; text-align: center; color: #1565c0; margin-bottom: 5px;}
        p.subtitle { text-align: center; font-size: 0.85rem; color: #546e7a; margin-bottom: 15px; }
        
        .card { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin-bottom: 20px; border-top: 4px solid #1565c0;}
        
        label { font-weight: bold; font-size: 0.95rem; color: #1e88e5; display: block; margin-bottom: 8px;}
        input[type="number"], select, input[type="text"] { width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #bbdefb; border-radius: 8px; font-size: 16px; box-sizing: border-box; background: #f8fbff; color: #0d47a1; font-weight: bold;}
        input:focus, select:focus { border-color: #1e88e5; outline: none; }
        
        .group-box { background: #f1f8e9; padding: 15px; border-radius: 8px; border: 1px solid #c5e1a5; margin-bottom: 15px; }
        .group-box.g2 { background: #fff3e0; border-color: #ffcc80; }
        .group-box.g3 { background: #ffebee; border-color: #ef9a9a; }
        .group-title { font-size: 1rem; font-weight: bold; margin-top: 0; margin-bottom: 10px; color: #333;}
        
        .flex-row { display: flex; gap: 10px; align-items: center; margin-bottom: 10px;}
        .flex-row > div { flex: 1; }
        .flex-row input, .flex-row select { margin-bottom: 0; }

        .calc-btn { background: #1565c0; color: white; border: none; padding: 16px; width: 100%; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 0 #0d47a1; margin-bottom: 10px; transition: 0.2s;}
        .calc-btn:active { transform: translateY(4px); box-shadow: none; }
        
        .result-box { display: none; background: #e3f2fd; padding: 20px; border-radius: 8px; border: 2px dashed #64b5f6; margin-top: 20px; }
        .result-box h2 { font-size: 1.2rem; color: #1565c0; margin-top: 0; text-align: center; border-bottom: 1px solid #90caf9; padding-bottom: 10px;}
        
        ul.result-list { list-style: none; padding: 0; margin: 0; font-size: 1rem; color: #333;}
        ul.result-list li { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px dashed #90caf9; }
        ul.result-list li:last-child { border-bottom: none; }
        .amount-highlight { font-weight: bold; color: #d32f2f; font-size: 1.3rem; }
        
        /* --- åºƒå‘Šç”¨CSS --- */
        .ad-box { margin-top: 25px; padding: 15px; background: #fff; border: 1px solid #eee; border-radius: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.02);}
        .ad-copy { font-size: 0.9rem; color: #d84315; font-weight: bold; margin-top: 0; margin-bottom: 10px; }
        .ad-banner img { max-width: 100%; height: auto !important; border-radius: 6px; }

        /* SEOãƒ†ã‚­ã‚¹ãƒˆ */
        .seo-text { max-width: 600px; margin: 30px auto 10px; padding: 20px; color: #666; font-size: 0.85rem; border-top: 1px solid #ddd; line-height: 1.6;}
    </style>
</head>
<body>
    <h1>ğŸ» ç¥ãƒ»å‰²ã‚Šå‹˜ãƒ„ãƒ¼ãƒ«</h1>
    <p class="subtitle">ä¸Šå¸ãƒ»é…åˆ»ãƒ»é‹è»¢æ‰‹â€¦ä¸å¹³ç­‰ãªæ”¯æ‰•ã„ã‚’ä¸€ç™ºè¨ˆç®—</p>

    <div class="card">
        <label>ãŠä¼šè¨ˆã®ç·é¡ã¯ï¼Ÿ</label>
        <div style="display:flex; align-items:center; gap:10px;">
            <input type="number" id="total-amount" placeholder="ä¾‹: 15400" min="0" style="font-size: 1.5rem; margin-bottom:0;">
            <span style="font-weight:bold; font-size:1.2rem; color:#1565c0;">å††</span>
        </div>

        <label style="margin-top:20px;">ç«¯æ•°ã®ä¸¸ã‚æ–¹ï¼ˆã‚­ãƒªè‰¯ãé›†é‡‘ï¼‰</label>
        <select id="round-unit">
            <option value="100">100å††å˜ä½ã§è¨ˆç®—</option>
            <option value="500">500å††å˜ä½ã§è¨ˆç®—</option>
            <option value="1000">1000å††å˜ä½ã§è¨ˆç®—</option>
            <option value="1">1å††å˜ä½ã§è¨ˆç®—ï¼ˆãã£ã¡ã‚Šï¼‰</option>
        </select>
    </div>

    <div class="card" style="border-top-color:#81c784;">
        <p style="font-size:0.85rem; color:#666; margin-top:0;">â€»äººæ•°ãŒ0äººã®ã‚°ãƒ«ãƒ¼ãƒ—ã¯è¨ˆç®—ã‹ã‚‰é™¤å¤–ã•ã‚Œã¾ã™</p>
        
        <div class="group-box">
            <input type="text" id="g1-name" value="å¤šã‚ã«æ‰•ã†äººï¼ˆä¸Šå¸ãƒ»ç”·æ€§ãªã©ï¼‰" class="group-title" style="background:transparent; border:none; border-bottom:1px solid #ccc; padding:5px 0; color:#2e7d32;">
            <div class="flex-row">
                <div>
                    <label>äººæ•°</label>
                    <input type="number" id="g1-count" value="1" min="0">
                </div>
                <div>
                    <label>æ”¯æ‰•ã„æ¯”ç‡</label>
                    <select id="g1-weight">
                        <option value="2.0">2.0å€ï¼ˆã‹ãªã‚Šå¤šã‚ï¼‰</option>
                        <option value="1.5" selected>1.5å€ï¼ˆå°‘ã—å¤šã‚ï¼‰</option>
                        <option value="1.0">1.0å€ï¼ˆæ™®é€šï¼‰</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="group-box g2">
            <input type="text" id="g2-name" value="æ™®é€šã«æ‰•ã†äºº" class="group-title" style="background:transparent; border:none; border-bottom:1px solid #ccc; padding:5px 0; color:#e65100;">
            <div class="flex-row">
                <div>
                    <label>äººæ•°</label>
                    <input type="number" id="g2-count" value="3" min="0">
                </div>
                <div>
                    <label>æ”¯æ‰•ã„æ¯”ç‡</label>
                    <select id="g2-weight">
                        <option value="1.0" selected>1.0å€ï¼ˆåŸºæº–ï¼‰</option>
                        <option value="0.8">0.8å€</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="group-box g3">
            <input type="text" id="g3-name" value="å°‘ãªãã¦ã„ã„äººï¼ˆé…åˆ»ãƒ»é‹è»¢æ‰‹ãªã©ï¼‰" class="group-title" style="background:transparent; border:none; border-bottom:1px solid #ccc; padding:5px 0; color:#c62828;">
            <div class="flex-row">
                <div>
                    <label>äººæ•°</label>
                    <input type="number" id="g3-count" value="0" min="0">
                </div>
                <div>
                    <label>æ”¯æ‰•ã„æ¯”ç‡</label>
                    <select id="g3-weight">
                        <option value="0.5" selected>0.5å€ï¼ˆåŠåˆ†ï¼‰</option>
                        <option value="0.3">0.3å€</option>
                        <option value="0">ç„¡æ–™ï¼ˆ0å††ï¼‰</option>
                    </select>
                </div>
            </div>
        </div>

        <button class="calc-btn" onclick="calcSplit()">è¨ˆç®—ã™ã‚‹</button>

        <div class="result-box" id="result-box">
            <h2>ğŸ’° 1äººã‚ãŸã‚Šã®é›†é‡‘é¡</h2>
            <ul class="result-list" id="result-list"></ul>
            <div id="result-diff" style="margin-top: 15px; text-align: center; font-weight: bold; font-size: 0.95rem;"></div>
        </div>
    </div>

    <div class="ad-box">
        <p class="ad-copy">ğŸš— æ¬¡å›ã®æ—…è¡Œã‚„ãƒ‰ãƒ©ã‚¤ãƒ–ã®äºˆç´„ã¯ãŠæ¸ˆã¿ã§ã™ã‹ï¼Ÿ</p>
        <div class="ad-banner" style="margin-top: 10px;">
            <a href="https://rpx.a8.net/svt/ejp?a8mat=4AXFOH+B43CUA+2HOM+6KESY&rakuten=y&a8ejpredirect=http%3A%2F%2Fhb.afl.rakuten.co.jp%2Fhgc%2F0eb4779e.5d30c5ba.0eb4779f.b871e4e3%2Fa26022081446_4AXFOH_B43CUA_2HOM_6KESY%3Fpc%3Dhttp%253A%252F%252Ftravel.rakuten.co.jp%252F%26m%3Dhttp%253A%252F%252Ftravel.rakuten.co.jp%252F" rel="nofollow" style="display:block; background:#ff9800; color:#fff; padding:15px; text-decoration:none; border-radius:8px; font-weight:bold; font-size: 1.1rem; box-shadow: 0 4px 0 #e65100; transition: 0.2s;">âœˆï¸ æ—…è¡Œãªã‚‰æ¥½å¤©ãƒˆãƒ©ãƒ™ãƒ«ã§ãŠå¾—ã«äºˆç´„</a>
            <img border="0" width="1" height="1" src="https://www16.a8.net/0.gif?a8mat=4AXFOH+B43CUA+2HOM+6KESY" alt="">
        </div>
    </div>

    <div class="ad-box" style="margin-top:15px;">
        <p class="ad-copy">ğŸ¥‚ ä»Šæ—¥ã®é£²ã¿ä¼šã€å‡ºä¼šã„ãŒã‚¤ãƒã‚¤ãƒã ã£ãŸãªã‚‰â€¦</p>
        <div class="ad-banner" style="margin-top: 10px;">
             <a href="https://px.a8.net/svt/ejp?a8mat=4AXFOH+CM9RCI+22QA+NTJWY" rel="nofollow" style="display:block; background:#ec407a; color:#fff; padding:15px; text-decoration:none; border-radius:8px; font-weight:bold; font-size: 1.1rem; box-shadow: 0 4px 0 #c2185b; transition: 0.2s;">âœ¨ ã€Pappyã€‘ãƒ¯ãƒ³ãƒ©ãƒ³ã‚¯ä¸Šã®å‡ºä¼šã„ã‚’æ¢ã™</a>
             <img border="0" width="1" height="1" src="https://www16.a8.net/0.gif?a8mat=4AXFOH+CM9RCI+22QA+NTJWY" alt="">
        </div>
    </div>

    <div class="seo-text">
        <h2>ğŸ’¡ ç¥ãƒ»å‰²ã‚Šå‹˜ãƒ„ãƒ¼ãƒ«ã¨ã¯ï¼Ÿ</h2>
        <p>è·å ´ã®é£²ã¿ä¼šã€ç”·å¥³ã®åˆã‚³ãƒ³ã€ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ»æ—…è¡Œãªã©ã€äººé–“é–¢ä¿‚ãŒçµ¡ã‚€ã€Œè¤‡é›‘ãªå‰²ã‚Šå‹˜ã€ã‚’ä¸€ç¬ã§è¨ˆç®—ã™ã‚‹ç„¡æ–™Webã‚¢ãƒ—ãƒªã§ã™ã€‚ä¸Šå¸ã‚„ç”·æ€§ã¯ã€Œå¤šã‚ï¼ˆ1.5å€ãªã©ï¼‰ã€ã€é…åˆ»ã—ãŸäººã‚„é‹è»¢æ‰‹ã¯ã€Œå°‘ãªã‚ãƒ»ç„¡æ–™ã€ã¨ã„ã£ãŸæ¯”ç‡ã‚’è¨­å®šã—ã€ä¼šè¨ˆæ™‚ã«ãƒ¢ã‚¿ã¤ã‹ãªã„ã‚ˆã†100å††ãƒ»500å††ãƒ»1000å††å˜ä½ã§ã‚­ãƒªè‰¯ãä¸¸ã‚ã¦ç®—å‡ºã—ã¾ã™ã€‚å¹¹äº‹ã•ã‚“ã®è² æ‹…ã‚’ã‚¼ãƒ­ã«ã™ã‚‹ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ãœã²ã”æ´»ç”¨ãã ã•ã„ã€‚</p>
    </div>

    <script>
        function calcSplit() {
            const total = parseInt(document.getElementById('total-amount').value) || 0;
            const unit = parseInt(document.getElementById('round-unit').value) || 100;

            let groups = [];
            for(let i=1; i<=3; i++) {
                const count = parseInt(document.getElementById(`g${i}-count`).value) || 0;
                const weight = parseFloat(document.getElementById(`g${i}-weight`).value) || 0;
                const name = document.getElementById(`g${i}-name`).value || `ã‚°ãƒ«ãƒ¼ãƒ—${i}`;
                if(count > 0 && weight >= 0) { // weight 0 (ç„¡æ–™)ã‚‚è¨±å®¹
                    groups.push({name, count, weight});
                }
            }

            if(total <= 0 || groups.length === 0) return;

            // æ¯”ç‡ã®åˆè¨ˆã‚’è¨ˆç®—
            const totalWeight = groups.reduce((sum, g) => sum + (g.count * g.weight), 0);
            if(totalWeight === 0) return; // å…¨å“¡ç„¡æ–™ã®å ´åˆã¯è¨ˆç®—ä¸å¯

            const baseAmount = total / totalWeight;
            let collected = 0;
            let resultHTML = '';

            groups.forEach(g => {
                if (g.weight === 0) {
                    resultHTML += `
                        <li>
                            <span><strong>${g.name}</strong> (${g.count}äºº)</span>
                            <span class="amount-highlight">0å†† <span style="font-size:0.8rem; color:#666;">/äºº</span></span>
                        </li>
                    `;
                } else {
                    let rawAmount = baseAmount * g.weight;
                    // å››æ¨äº”å…¥ã§ã‚­ãƒªã®è‰¯ã„æ•°å­—ã«ä¸¸ã‚ã‚‹
                    let roundedAmount = Math.round(rawAmount / unit) * unit;
                    collected += roundedAmount * g.count;

                    resultHTML += `
                        <li>
                            <span><strong>${g.name}</strong> (${g.count}äºº)</span>
                            <span class="amount-highlight">${roundedAmount.toLocaleString()}å†† <span style="font-size:0.8rem; color:#666;">/äºº</span></span>
                        </li>
                    `;
                }
            });

            // å¹¹äº‹ã®ç²¾ç®—ï¼ˆä½™ã‚Šã‹ä¸è¶³ã‹ï¼‰
            const diff = collected - total;
            let diffHTML = '';
            if (diff > 0) {
                diffHTML = `<span style="color:#2e7d32;">â€»é›†é‡‘åˆè¨ˆ: ${collected.toLocaleString()}å††<br>ï¼ˆå¹¹äº‹ã•ã‚“ã®ãŠæ‰‹å…ƒã« ${diff.toLocaleString()}å†† ä½™ã‚Šã¾ã™ï¼‰</span>`;
            } else if (diff < 0) {
                diffHTML = `<span style="color:#c62828;">â€»é›†é‡‘åˆè¨ˆ: ${collected.toLocaleString()}å††<br>ï¼ˆâš ï¸ å¹¹äº‹ã•ã‚“ã®æ”¯æ‰•ã„ãŒ ${Math.abs(diff).toLocaleString()}å†† ä¸è¶³ã—ã¾ã™ï¼‰</span>`;
            } else {
                diffHTML = `<span style="color:#1565c0;">â€»é›†é‡‘åˆè¨ˆ: ${collected.toLocaleString()}å††ï¼ˆãƒ”ãƒƒã‚¿ãƒªã§ã™ï¼ï¼‰</span>`;
            }

            document.getElementById('result-list').innerHTML = resultHTML;
            document.getElementById('result-diff').innerHTML = diffHTML;
            document.getElementById('result-box').style.display = 'block';
        }
    </script>
</body>
</html>
